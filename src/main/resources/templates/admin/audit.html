<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::section})}">
<section>
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="page-title mb-0">Audit log</h4>
        <a class="btn btn-outline-secondary btn-sm" th:href="@{/admin}">Назад</a>
    </div>

    <div class="card mb-3">
        <div class="card-body">
            <form class="row g-2 align-items-end" th:action="@{/admin/audit}" method="get">
                <div class="col-md-4">
                    <label class="form-label">Actor email</label>
                    <input class="form-control" name="actor" th:value="${actor}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Action</label>
                    <input class="form-control" name="action" th:value="${action}">
                </div>
                <div class="col-md-2">
                    <button class="btn btn-primary w-100" type="submit">Фильтр</button>
                </div>
            </form>
        </div>
    </div>

    <div class="card">
        <div class="card-body p-0">
            <div class="text-muted p-3" th:if="${#lists.isEmpty(logs)}">Нет записей</div>
            <table class="table table-hover align-middle mb-0" th:if="${!#lists.isEmpty(logs)}">
                <thead>
                <tr>
                    <th>Дата</th>
                    <th>Actor</th>
                    <th>Action</th>
                    <th>Entity</th>
                    <th>Details</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="log : ${logs}">
                    <td th:text="${#temporals.format(log.createdAt, 'dd.MM.yyyy HH:mm')}">date</td>
                    <td th:text="${log.actorEmail}">actor</td>
                    <td th:text="${log.action}">action</td>
                    <td th:text="${log.entityType + ' #' + log.entityId}">entity</td>
                    <td th:text="${log.details}">details</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>
</html>
